<!DOCTYPE html>
<html ng-app="EnvironmentManager">
<head>
  <title>Environment Manager</title>
  <base href="/" />
  <link rel="stylesheet" href="assets/css/bootstrap-3.3.5/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/angular-ui-tree.min.css" />
  <link rel="stylesheet" href="assets/css/angular-ui-grid.min.css" />
  <link rel="stylesheet" href="assets/css/select.min.css" />
  <link rel="stylesheet" href="styles/app-generated.css" />
  <link rel="stylesheet" href="assets/css/jsondiffpatch.css"/>

  <link href="assets/images/favicon.ico" rel="SHORTCUT ICON"/>
  <link href="assets/images/favicon-32x32.png" rel="icon" type="image/png" sizes="32x32">
  <link href="assets/images/favicon-16x16.png" rel="icon" type="image/png" sizes="16x16">

  <!-- Libraries -->
  <!-- build:js scripts/lib.js -->
  <script type="text/javascript" src="bower_components/jsondiffpatch/public/build/jsondiffpatch-full.js"></script>
  <script type="text/javascript" src="bower_components/jsondiffpatch/public/build/jsondiffpatch-formatters.js"></script>

  <script type="text/javascript" src="assets/lib/ace.js"></script>
  <script type="text/javascript" src="assets/lib/ajv.min.js"></script>
  <script type="text/javascript" src="assets/lib/mode-json.js"></script>
  <script type="text/javascript" src="assets/lib/worker-json.js"></script>
  <script type="text/javascript" src="assets/lib/ext-searchbox.js"></script>
  <script type="text/javascript" src="bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="bower_components/angular-route/angular-route.js"></script>
  <script type="text/javascript" src="assets/lib/ui-ace.min.js"></script>
  <script type="text/javascript" src="assets/lib/angular-file-saver.bundle.min.js"></script>
  <script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>
  <script type="text/javascript" src="assets/lib/angular-moment.min.js"></script>
  <script type="text/javascript" src="assets/lib/ui-bootstrap-tpls-2.1.3.min.js"></script>
  <script type="text/javascript" src="assets/lib/linq.min.js"></script>
  <script type="text/javascript" src="assets/lib/spin.min.js"></script>
  <script type="text/javascript" src="assets/lib/thenBy.min.js"></script>
  <script type="text/javascript" src="bower_components/angular-ui-tree/dist/angular-ui-tree.js"></script>
  <script type="text/javascript" src="assets/lib/ui-grid.min.js"></script>
  <script type="text/javascript" src="bower_components/later/later.min.js"></script>
  <script type="text/javascript" src="bower_components/lodash/dist/lodash.min.js"></script>
  <script type="text/javascript" src="bower_components/prettycron/prettycron.js"></script>
  <script type="text/javascript" src="assets/lib/glob-intersection.js"></script>
  <script type="text/javascript" src="assets/lib/select.min.js"></script>
  <!-- endbuild -->

  <script type="text/javascript" src="user.js"></script>
  <script type="text/javascript" src="cronService.js"></script>

  <script src="/api/initial-data"></script>
  <script src="http://localhost:8081/bundle.js"></script>
</head>
<body ng-controller="MainController as main">
  <header>
    <a href="#/"><img id="logo" src="assets/images/logo.jpg" height="30"/></a>
    <h1 title="Environment Manager {{appVersion}}"><a href="#/">Environment Manager</a></h1>
    <nav>
      <ul>
        <li><a href="#/environments" ng-class="{active: main.getSection()=='environments'}">Environments</a></li>
        <li><a href="#/operations/deployments" ng-class="{active: main.getSection()=='operations'}">Operations</a></li>
        <li><a href="#/compare" ng-class="{active: main.getSection()=='compare'}">Compare</a></li>
        <li><a href="#/config/services" ng-class="{active: main.getSection()=='config'}">Configuration</a></li>
        <li><a href="/docs" target="_blank">API docs</a></li>
      </ul>
    </nav>
    <div id="userinfo">
      <span><span class="glyphicon glyphicon-user"></span> <strong>{{LoggedInUser}}</strong></span>
      <span id="logout"><a href="/logout">Logout</a></span>
    </div>
  </header>

  <div>
    <div id="sidebar" ng-if="main.getSection()=='config'">
      <h3>Configuration:</h3>
      <nav>
        <ul>
          <li><a href="#/config/services" ng-class="{active: $route.current.menusection == 'Services'}">Services</a></li>
          <li><a href="#/config/deploymentmaps" ng-class="{active: $route.current.menusection == 'DeploymentMaps'}">Deployment Maps</a></li>
          <li><a href="#/config/loadbalancers" ng-class="{active: $route.current.menusection == 'LBs'}">Load Balancer</a></li>
          <li><a href="#/config/upstreams" ng-class="{active: $route.current.menusection == 'LBUpstream'}">Upstreams</a></li>
          <li><a href="#/config/clusters" ng-class="{active: $route.current.menusection == 'Clusters'}">Clusters</a></li>
          <li><a href="#/config/environmenttypes" ng-class="{active: $route.current.menusection == 'EnvironmentTypes'}">Environment Types</a></li>
          <li><a href="#/config/accounts" ng-class="{active: $route.current.menusection == 'Accounts'}">Accounts</a></li>
        </ul>
        <hr/>
        <ul>
          <li ng-if="canUser('edit')"><a href="#/config/import" ng-class="{active: $route.current.menusection == 'Import'}">Import Config</a></li>
          <li><a href="#/config/export" ng-class="{active: $route.current.menusection == 'Export'}">Export Config</a></li>
        </ul>
        <hr />
        <ul>
          <li><a href="#/config/audit" ng-class="{active: $route.current.menusection == 'Audit'}">Audit History</a></li>
        </ul>
        <hr />
        <ul>
          <li><a href="#/config/permissions" ng-class="{active: $route.current.menusection == 'Permission'}">Users / Groups</a></li>
        </ul>
      </nav>
    </div>
    <div id="sidebar" ng-if="main.getSection()=='operations'">
      <h3>Operations:</h3>
      <nav>
        <ul>
          <li><a href="#/operations/deployments" ng-class="{active: $route.current.menusection == 'Deployments'}">Deployments</a></li>
          <li><a href="#/operations/upstreams" ng-class="{active: $route.current.menusection == 'Upstreams'}">Upstream Status</a></li>
          <li><a href="#/operations/amis" ng-class="{active: $route.current.menusection == 'AMIs'}">AMI Versions</a></li>
          <li><a href="#/operations/maintenance" ng-class="{active: $route.current.menusection == 'Maintenance'}">Server Maintenance</a></li>
        </ul>
      </nav>
    </div>
    <div id="sidebar" ng-if="main.getSection()=='environments' && $route.current.menusection != ''">
      <h3>Environment</h3>
      <form name="form">
        <select id="SelectEnvironment" class="form-control" ng-model="WorkingEnvironment.EnvironmentName" ng-change="ChangeEnvironment()">
          <option ng-repeat="env in $parent.ParentEnvironmentsList" ng-selected="{{env == WorkingEnvironment.EnvironmentName}}" value="{{env}}">{{env}}</option>
        </select>
      </form>
      <nav>
        <ul>
          <li><a href="#/environment/servers?environment={{WorkingEnvironment.EnvironmentName}}" ng-class="{active: $route.current.menusection == 'EnvServers'}">Servers</a></li>
          <li><a href="#/environment/schedule?environment={{WorkingEnvironment.EnvironmentName}}" ng-class="{active: $route.current.menusection == 'EnvSchedule'}">Schedule</a></li>
          <li><a href="#/environment/settings?environment={{WorkingEnvironment.EnvironmentName}}" ng-class="{active: $route.current.menusection == 'EnvSettings'}">Settings</a></li>
          <!--<li><a href="#/environment/infrastructure?environment={{WorkingEnvironment.EnvironmentName}}" ng-class="{active: $route.current.menusection == 'EnvInfrastructure'}">Infrastructure</a></li>-->
        </ul>
      </nav>
    </div>
    <div id="content" ng-class="{sidebar: $route.current.menusection != ''}" ng-view></div>
  </div>

  <footer></footer>

</body>
</html>
